@using RazorEngine.Templating;
@inherits TemplateBase<ReportUnit.Model.Summary>
@{Layout = "_Shared/_Layout";}
<div class='header'>
    <nav>
        @Include("_Shared/_SideNav", Model.SideNavLinks)
        <span class='file-name'>Executive Summary</span>
        <ul class='left'>
            <li class='logo'>
                <a href='http://reportunit.relevantcodes.com/'><span>ReportUnit</span></a>
            </li>
        </ul>
        <div class='right hide-on-med-and-down nav-right'>
            <div class='nav-item'>
                v1.50.0
            </div>
        </div>
    </nav>
</div>

<div class='main'>
    <div class='main-wrap'>
        <div class='row'>
            <div class='col s12'>
                <div class='card-panel report-list no-margin-v'>
                    <table class='table bordered'>
                        <thead>
                            <tr>
                                <th>File</th>
                                <th>TestRunner</th>
                                <th>Total Tests</th>
                                <th>Passed</th>
                                <th>Failed</th>
                                <th>Others</th>
                                <th>Quick Summary</th>
                            </tr>
                        </thead>
                        <tbody>
                            @{double totalPassed = 0;
                                double totalFailed = 0;
                                double totalOthers = 0;
                            }

                            @foreach (var report in Model.Reports)
                            {
                                <tr>
                                    <td><a href='./@(report.FileName).html'>@report.FileName</a></td>
                                    <td>@report.TestRunner</td>
                                    <td>@report.Total</td>
                                    <td>@report.Passed</td>
                                    <td>@report.Failed</td>
                                    <td>@(report.Inconclusive + report.Skipped + report.Errors)</td>
                                    <td>
                                        @{var total = report.Total;
                                            var passed = report.Passed;
                                            var failed = report.Failed;
                                            var others = report.Total - (report.Passed + report.Failed);

                                            totalPassed += passed;
                                            totalFailed += failed;
                                            totalOthers += others;
                                        }
                                        @if (report.Total != 0)
                                        {
                                            <div class='progress2'>
                                                @if (passed != 0)
                                                {
                                                    <div style='width: @((passed / total) * 100)%' class='progress-bar2 progress-bar-success progress-bar-striped'>
                                                        <span class='sr-only'>@passed</span>
                                                    </div>
                                                }
                                                @if (others != 0)
                                                {
                                                    <div style='width: @((others / total) * 100)%' class='progress-bar2 progress-bar-warning progress-bar-striped'>
                                                        <span class='sr-only'>@others</span>
                                                    </div>
                                                }
                                                @if (failed != 0)
                                                {
                                                    <div style='width: @((failed / total) * 100)%' class='progress-bar2 progress-bar-danger progress-bar-striped'>
                                                        <span class='sr-only'>@failed</span>
                                                    </div>
                                                }
                                            </div>
                                        }
                                        else
                                        {
                                            <div class='progress2'>
                                                <div style='width: 0%' class='progress-bar2 progress-bar-success progress-bar-striped'>
                                                    <span class='sr-only'>0</span>
                                                </div>
                                            </div>
                                        }
                                    </td>
                                </tr>
                                            }
                            <tr>
                                <td><span class='weight-normal'>Totals</span></td>
                                <td>-</td>
                                <td id='total-tests'>@Model.Reports.SelectMany(x => x.TestSuiteList).SelectMany(x => x.TestList).Count()</td>
                                <td id='total-passed'>@totalPassed</td>
                                <td id='total-failed'>@totalFailed</td>
                                <td id='total-others'>@totalOthers</td>
                                <td>-</td>
                            </tr>
                        </tbody>
                    </table>
                </div>
            </div>
        </div>
    </div>
</div>
<div id='modal2' class='modal'>
    <div class='modal-content'>
        <h4>Console Log</h4>
    </div>
    <div class='modal-footer'>
        <a href='#!' class='modal-action modal-close waves-effect waves-green btn-flat'>Close</a>
    </div>
</div>